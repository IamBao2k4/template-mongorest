{
  "_id": "677b8f3eb664f6a424540edf",
  "title": "view user statistics",
  "outputEntity": [
    "6747ef07c47463d88f8c5ab1"
  ],
  "queryAdvance": "[\n  {\n    \"$match\": {\n      \"_id\": { \"$exists\": false }\n    }\n  },\n  {\n    \"$unionWith\": {\n      \"coll\": \"mge-tweet-social-image\",\n      \"pipeline\": [\n        {\n          \"$addFields\": {\n            \"type\": \"images\"\n          }\n        }\n      ]\n    }\n  },\n  {\n    \"$unionWith\": {\n      \"coll\": \"mge-tweet-social-videos\",\n      \"pipeline\": [\n        {\n          \"$addFields\": {\n            \"type\": \"videos\"\n          }\n        }\n      ]\n    }\n  },\n  {\n    \"$unionWith\": {\n      \"coll\": \"mge-tweet-social-news\",\n      \"pipeline\": [\n        {\n          \"$addFields\": {\n            \"type\": \"news\"\n          }\n        }\n      ]\n    }\n  },\n  {\n    \"$unionWith\": {\n      \"coll\": \"mge-tweet-social-votes\",\n      \"pipeline\": [\n        {\n          \"$addFields\": {\n            \"type\": \"votes\"\n          }\n        }\n      ]\n    }\n  },\n  {\n    \"$addFields\": {\n      \"_id\": {\n        \"$toString\": \"$_id\"\n      }\n    }\n  },\n  {\n    \"$match\": {\n      \"status\": \"active\",\n      \"created_by\": \"@param:user_id\"\n    }\n  },\n  {\n    \"$addFields\": {\n      \"groupObject\": {\n        \"$map\": {\n          \"input\": \"$social_group\",\n          \"as\": \"u\",\n          \"in\": {\n            \"$toObjectId\": \"$$u\"\n          }\n        }\n      }\n    }\n  },\n  {\n    \"$lookup\": {\n      \"from\": \"mge-group\",\n      \"localField\": \"groupObject\",\n      \"foreignField\": \"_id\",\n      \"pipeline\": [\n        {\n          \"$match\": {\n            \"type\": \"public\"\n          }\n        }\n      ],\n      \"as\": \"groupData\"\n    }\n  },\n  {\n    \"$lookup\": {\n      \"from\": \"mge-group-member\",\n      \"localField\": \"social_group\",\n      \"foreignField\": \"social_group\",\n      \"pipeline\": [\n        {\n          \"$match\": {\n            \"user\": \"@jwt:user.id\",\n            \"status\": \"joined\"\n          }\n        }\n      ],\n      \"as\": \"memberData\"\n    }\n  },\n  {\n    \"$match\": {\n      \"$or\": [\n        { \"groupData\": { \"$ne\": [] } },\n        { \"memberData\": { \"$ne\": [] } }\n      ]\n    }\n  },\n  {\n    \"$group\": {\n      \"_id\": \"$created_by\",\n      \"count\": { \"$sum\": 1 }\n    }\n  },\n  {\n    \"$project\": {\n      \"_id\": 0,\n      \"count\": 1,\n      \"name\": 1\n    }\n  },\n  {\n    \"$addFields\": {\n      \"name\": {\n        \"$toString\": \"userCountPosts\"\n      }\n    }\n  },\n  {\n    \"$unionWith\": {\n      \"coll\": \"mge-user-follow\",\n      \"pipeline\": [\n        {\n          \"$match\": {\n            \"to\": \"@param:user_id\"\n          }\n        },\n        {\n          \"$group\": {\n            \"_id\": \"$to\",\n            \"count\": { \"$sum\": 1 }\n          }\n        },\n        {\n          \"$project\": {\n            \"_id\": 0,\n            \"count\": 1,\n            \"name\": 1\n          }\n        },\n        {\n          \"$addFields\": {\n            \"name\": {\n              \"$toString\": \"userCountFollowers\"\n            }\n          }\n        }\n      ]\n    }\n  },\n  {\n    \"$unionWith\": {\n      \"coll\": \"mge-group-member\",\n      \"pipeline\": [\n        {\n          \"$match\": {\n            \"user\": \"@param:user_id\",\n            \"status\": \"joined\"\n          }\n        },\n        {\n          \"$lookup\": {\n            \"from\": \"mge-group-member\",\n            \"localField\": \"social_group\",\n            \"foreignField\": \"social_group\",\n            \"pipeline\": [\n              {\n                \"$match\": {\n                  \"user\": \"@jwt:user.id\",\n                  \"status\": \"joined\"\n                }\n              }\n            ],\n            \"as\": \"resultA\"\n          }\n        },\n        {\n          \"$addFields\": {\n            \"groupObject\": {\n              \"$map\": {\n                \"input\": \"$social_group\",\n                \"as\": \"u\",\n                \"in\": {\n                  \"$toObjectId\": \"$$u\"\n                }\n              }\n            }\n          }\n        },\n        {\n          \"$lookup\": {\n            \"from\": \"mge-group\",\n            \"localField\": \"groupObject\",\n            \"foreignField\": \"_id\",\n            \"pipeline\": [\n              {\n                \"$match\": {\n                  \"type\": \"public\"\n                }\n              }\n            ],\n            \"as\": \"resultB\"\n          }\n        },\n        {\n          \"$match\": {\n            \"$or\": [\n              { \"resultA\": { \"$ne\": [] } },\n              { \"resultB\": { \"$ne\": [] } }\n            ]\n          }\n        },\n        {\n          \"$group\": {\n            \"_id\": \"$to\",\n            \"count\": { \"$sum\": 1 }\n          }\n        },\n        {\n          \"$project\": {\n            \"_id\": 0,\n            \"count\": 1,\n            \"name\": 1\n          }\n        },\n        {\n          \"$addFields\": {\n            \"name\": {\n              \"$toString\": \"userCountGroups\"\n            }\n          }\n        }\n      ]\n    }\n  },\n  {\n    \"$facet\": {\n      \"meta_data\": [\n        { \"$count\": \"count\" },\n        {\n          \"$addFields\": {\n            \"skip\": \"@param:skip\",\n            \"limit\": \"@param:limit\"\n          }\n        }\n      ],\n      \"data\": [\n        { \"$skip\": \"@param:skip\" },\n        { \"$limit\": \"@param:limit\" }\n      ]\n    }\n  }\n]",
  "note": "",
  "method": "get-list",
  "locale": null,
  "locale_id": null,
  "tenant_id": "674028d2611a654e763a73e8",
  "body": null,
  "documents": [],
  "headers": null,
  "params": [
    {
      "key": "",
      "value": "aas",
      "description": ""
    },
    {
      "key": "",
      "value": "",
      "description": ""
    }
  ]
}