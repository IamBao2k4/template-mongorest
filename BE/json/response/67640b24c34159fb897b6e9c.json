{
  "_id": "67640b24c34159fb897b6e9c",
  "title": "Get list tweet from group type public",
  "outputEntity": [
    "6747ef07c47463d88f8c5ab1"
  ],
  "note": "Lấy danh sách bài viết thuộc nhóm public, các bài viết phải có trạng thái là active",
  "method": "get-list",
  "locale": null,
  "locale_id": null,
  "tenant_id": "674028d2611a654e763a73e8",
  "queryAdvance": "[\n  { \"$match\": { \"type\": \"public\" } },\n  { \"$addFields\": { \"id\": { \"$toString\": \"$_id\" } } },\n  { \"$lookup\": {\n        \"from\": \"mge-tweet-social-image\", \n        \"let\": { \"id\": { \"$toString\": \"$_id\" } },\n        \"pipeline\": [\n            { \"$match\": {\n                \"$expr\": {\n                    \"$and\": [\n                        { \"$in\": [\"$$id\", \"$social_group\"] },\n                        { \"$eq\": [\"$status\", \"active\"] }\n                    ]\n                }\n            } },\n            { \"$addFields\": { \"type\": \"image\" } }\n        ],\n        \"as\": \"images\"\n    }\n  },\n  { \"$lookup\": {\n        \"from\": \"mge-tweet-social-videos\", \n        \"let\": { \"id\": { \"$toString\": \"$_id\" } },\n        \"pipeline\": [\n            { \"$match\": {\n                \"$expr\": {\n                    \"$and\": [\n                        { \"$in\": [\"$$id\", \"$social_group\"] },\n                        { \"$eq\": [\"$status\", \"active\"] }\n                    ]\n                }\n            } },\n            { \"$addFields\": { \"type\": \"video\" } }\n        ],\n        \"as\": \"videos\"\n    }\n  },\n  { \"$lookup\": {\n        \"from\": \"mge-tweet-social-news\", \n        \"let\": { \"id\": { \"$toString\": \"$_id\" } },\n        \"pipeline\": [\n            { \"$match\": {\n                \"$expr\": {\n                    \"$and\": [\n                        { \"$in\": [\"$$id\", \"$social_group\"] },\n                        { \"$eq\": [\"$status\", \"active\"] }\n                    ]\n                }\n            } },\n            { \"$addFields\": { \"type\": \"news\" } }\n        ],\n        \"as\": \"news\"\n    }\n  },\n  { \"$lookup\": {\n        \"from\": \"mge-tweet-social-votes\", \n        \"let\": { \"id\": { \"$toString\": \"$_id\" } },\n        \"pipeline\": [\n            { \"$match\": {\n                \"$expr\": {\n                    \"$and\": [\n                        { \"$in\": [\"$$id\", \"$social_group\"] },\n                        { \"$eq\": [\"$status\", \"active\"] }\n                    ]\n                }\n            } },\n            { \"$addFields\": { \"type\": \"vote\" } }\n        ],\n        \"as\": \"votes\"\n    }\n  },\n  { \"$addFields\": {\n        \"contents\": {\n            \"$concatArrays\": [\n                \"$images\", \n                \"$videos\", \n                \"$news\", \n                \"$votes\"\n            ]\n        }\n    }\n  },\n  { \"$unwind\": \"$contents\" },\n  { \"$replaceRoot\": { \"newRoot\": \"$contents\" } },\n  { \"$sort\": { \"created_at\": 1 } },\n  {\n    \"$facet\": {\n      \"meta_data\": [\n        { \"$count\": \"count\" },\n        {\n          \"$addFields\": {\n          \"skip\": \"@param:skip\",\n          \"limit\": \"@param:limit\"\n        }\n        }\n      ],\n      \"data\": [\n        { \"$skip\": \"@param:skip\" },\n        { \"$limit\": \"@param:limit\" }\n      ]\n    }\n  }\n]"
}