{
  "_id": "67641674c34159fb897b6ee7",
  "title": "Get list tweet status store in group",
  "outputEntity": [
    "6747ef07c47463d88f8c5ab1"
  ],
  "queryAdvance": "[\n  {\n    \"$addFields\": {\n      \"id\": {\n        \"$toString\": \"$_id\"\n      }\n    }\n  },\n  {\n    \"$match\": {\n      \"id\": \"@param:group_id\"\n    }\n  },\n  {\n    \"$lookup\": {\n      \"from\": \"mge-tweet-social-image\",\n      \"let\": { \"id\": { \"$toString\": \"$_id\" } },\n      \"pipeline\": [\n        {\n          \"$match\": {\n            \"$expr\": {\n              \"$and\": [\n                { \"$in\": [\"$$id\", \"$social_group\"] },\n                { \"$eq\": [ \"$status\", \"store\" ] }\n              ]\n            }\n          }\n        },\n        {\n          \"$addFields\": {\n            \"type\": \"image\"\n          }\n        }\n      ],\n      \"as\": \"images\"\n    }\n  },\n  {\n    \"$lookup\": {\n      \"from\": \"mge-tweet-social-videos\",\n      \"let\": { \"id\": { \"$toString\": \"$_id\" } },\n      \"pipeline\": [\n        {\n          \"$match\": {\n            \"$expr\": {\n              \"$and\": [\n                { \"$in\": [\"$$id\", \"$social_group\"] },\n                { \"$eq\": [ \"$status\", \"store\" ] }\n              ]\n            }\n          }\n        },\n        {\n          \"$addFields\": {\n            \"type\": \"video\"\n          }\n        }\n      ],\n      \"as\": \"videos\"\n    }\n  },\n  {\n    \"$lookup\": {\n      \"from\": \"mge-tweet-social-news\",\n      \"let\": { \"id\": { \"$toString\": \"$_id\" } },\n      \"pipeline\": [\n        {\n          \"$match\": {\n            \"$expr\": {\n              \"$and\": [\n                { \"$in\": [\"$$id\", \"$social_group\"] },\n                { \"$eq\": [\"$status\", \"store\"] }\n              ]\n            }\n          }\n        },\n        {\n          \"$addFields\": {\n            \"type\": \"news\"\n          }\n        }\n      ],\n      \"as\": \"news\"\n    }\n  },\n  {\n    \"$lookup\": {\n      \"from\": \"mge-tweet-social-votes\",\n      \"let\": { \"id\": { \"$toString\": \"$_id\" } },\n      \"pipeline\": [\n        {\n          \"$match\": {\n            \"$expr\": {\n              \"$and\": [\n                { \"$in\": [\"$$id\", \"$social_group\"] },\n                { \"$eq\": [\"$status\", \"store\"] }\n              ]\n            }\n          }\n        },\n        {\n          \"$addFields\": {\n            \"type\": \"vote\"\n          }\n        }\n      ],\n      \"as\": \"votes\"\n    }\n  },\n  {\n    \"$addFields\": {\n      \"contents\": {\n        \"$concatArrays\": [\n          \"$images\", \n          \"$videos\", \n          \"$news\", \n          \"$votes\"\n        ]\n      }\n    }\n  },\n  {\n    \"$unwind\": \"$contents\"\n  },\n  {\n    \"$replaceRoot\": { \"newRoot\": \"$contents\" }\n  },\n  {\n    \"$sort\": { \"created_at\": 1 }\n  },\n  {\n    \"$facet\": {\n      \"meta_data\": [\n        { \"$count\": \"count\" },\n        {\n          \"$addFields\": {\n          \"skip\": \"@param:skip\",\n          \"limit\": \"@param:limit\"\n        }\n        }\n      ],\n      \"data\": [\n        { \"$skip\": \"@param:skip\" },\n        { \"$limit\": \"@param:limit\" }\n      ]\n    }\n  }\n]",
  "note": "Danh sách bài viết có status : store",
  "method": "get-list",
  "locale": null,
  "locale_id": null,
  "tenant_id": "674028d2611a654e763a73e8"
}